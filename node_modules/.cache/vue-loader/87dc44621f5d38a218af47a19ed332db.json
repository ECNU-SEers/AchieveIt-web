{"remainingRequest":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DownLoad\\git\\achieve\\AchieveIt-web\\src\\views\\home\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\src\\views\\home\\Home.vue","mtime":1584099524345},{"path":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {NavBar, SideBar, AppMain, ReuseTab, MenuTab, BackTop} from '@/components/layout';\n\nconst navBarHeight = 66; // header高度\nconst reuseTabHeight = 70; // 历史记录栏高度\nconst marginHeight = 20; // 历史记录栏与舞台的间距\nconst sideBarWidth = '210px';\nconst totalHeight = navBarHeight + reuseTabHeight + marginHeight;\n\nexport default {\n  name: 'layout',\n  data() {\n    return {\n      isCollapse: false, // 左侧菜单栏是否折叠\n      sideBarWidth, // 左侧菜单栏展开的宽度\n      clientWidth: 0, // 页面宽度\n      clientHeight: 0, // 页面高度\n      foldState: false, // 控制左侧菜单栏按键\n      isPhone: false,\n    };\n  },\n  created() {\n  },\n  mounted() {\n    this.setResize();\n    // console.log(this.clientWidth)\n    if (this.clientWidth < 500) {\n      this.isPhone = true;\n    } else {\n      this.isPhone = false;\n      // 检测屏幕宽度, 确定默认是否展开\n      if (this.clientWidth <= 768) {\n        this.eventBus.$emit('removeSidebarSearch');\n        this.isCollapse = true;\n      } else {\n        this.isCollapse = false;\n        this.eventBus.$emit('showSidebarSearch');\n      }\n    }\n    // 监测屏幕宽度 折叠左侧菜单栏\n    window.onresize = () => {\n      this.setResize();\n      if (this.clientWidth <= 500) {\n        this.isPhone = true;\n      } else if (this.clientWidth <= 800) {\n        this.isPhone = false;\n      }\n\n      // if (_this.clientWidth <= 768) {\n      //   // 页面宽度 768\n      //   if (_this.isCollapse === false) {\n      //     _this.eventBus.$emit('removeSidebarSearch')\n      //     _this.isCollapse = true\n      //   }\n      // } else if (_this.isCollapse === true) {\n      //   _this.eventBus.$emit('showSidebarSearch')\n      //   _this.isCollapse = false\n      // }\n    };\n\n    this.eventBus.$on('noReuse', () => {\n      this.$refs.operate.style.height = '86px';\n    });\n    this.eventBus.$on('hasReuse', () => {\n      this.$refs.operate.style.height = '45px';\n    });\n  },\n  inject: ['eventBus'],\n  computed: {\n    elMenuCollapse() {\n      if (this.isPhone) {\n        return false;\n      }\n\n      return this.isCollapse;\n    },\n    asideStyle() {\n      const style = {};\n      if (this.isPhone) {\n        style.position = 'absolute';\n        style.height = `${this.clientHeight}px`;\n        style.zIndex = 12;\n        if (this.isCollapse === false) {\n          style.transform = `translateX(-${sideBarWidth})`;\n        } else {\n          style.transform = 'translateX(0)';\n        }\n      }\n      return style;\n    },\n  },\n  methods: {\n    // 控制菜单折叠\n    changeSlidebarState() {\n      this.isCollapse = !this.isCollapse;\n      if (this.isCollapse) {\n        this.eventBus.$emit('removeSidebarSearch');\n      } else {\n        this.eventBus.$emit('showSidebarSearch');\n      }\n      this.foldState = !this.foldState;\n    },\n    // 响应页面的宽度高度变化\n    setResize() {\n      this.clientHeight = document.body.clientHeight;\n      this.clientWidth = document.body.clientWidth;\n      this.$refs.appMain.$el.style.minHeight = `${this.clientHeight - totalHeight + 20}px`;\n    },\n  },\n  watch: {\n    isCollapse() {\n      if (this.isPhone) {\n        // 手机模式\n        this.sideBarWidth = sideBarWidth;\n        if (this.isCollapse === false) {\n          this.transX = 0;\n        } else {\n          this.transX = -1 * sideBarWidth;\n        }\n      } else {\n        this.transX = 0;\n        this.sideBarWidth = this.isCollapse === false ? sideBarWidth : '64px';\n      }\n    },\n    $route() {\n      this.showBackTop = false;\n      if (this.scrollY <= 70) {\n        // MenuTab组件高度\n        this.backTop();\n      }\n      if (this.isPhone && this.isCollapse) {\n        this.changeSlidebarState();\n      }\n    },\n  },\n  components: {\n    NavBar,\n    SideBar,\n    AppMain,\n    ReuseTab,\n    MenuTab,\n    BackTop,\n  },\n  beforeDestroy() {\n    this.eventBus.$off('noReuse');\n    this.eventBus.$off('hasReuse');\n  },\n};\n",{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\r\n    <div style=\"height:100%;\">\r\n        <el-container>\r\n            <el-aside :width=\"sideBarWidth\" class=\"aside\" :style=\"asideStyle\">\r\n                <side-bar :isCollapse=\"isCollapse\" :is-phone=\"isPhone\"></side-bar>\r\n            </el-aside>\r\n            <el-container>\r\n                <el-header class=\"header\">\r\n                    <div class=\"left\">\r\n                        <div class=\"operate\" ref=\"operate\">\r\n                            <i class=\"iconfont icon-fold\" :class=\"{ rotate: foldState }\" @click=\"changeSlidebarState\"/>\r\n                            <nav-bar></nav-bar>\r\n                        </div>\r\n                        <el-collapse-transition>\r\n                            <reuse-tab ref=\"reuse\"></reuse-tab>\r\n                        </el-collapse-transition>\r\n                    </div>\r\n                </el-header>\r\n                <el-main ref=\"main\">\r\n                    <menu-tab></menu-tab>\r\n                    <app-main ref=\"appMain\"></app-main>\r\n                </el-main>\r\n                <back-top :right=\"50\" :bottom=\"50\" :fontSize=\"34\"></back-top>\r\n            </el-container>\r\n            <div class=\"sidenav-mask\" :class=\"{ show: isPhone && isCollapse }\" @click=\"changeSlidebarState\"></div>\r\n        </el-container>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  import {NavBar, SideBar, AppMain, ReuseTab, MenuTab, BackTop} from '@/components/layout';\r\n\r\n  const navBarHeight = 66; // header高度\r\n  const reuseTabHeight = 70; // 历史记录栏高度\r\n  const marginHeight = 20; // 历史记录栏与舞台的间距\r\n  const sideBarWidth = '210px';\r\n  const totalHeight = navBarHeight + reuseTabHeight + marginHeight;\r\n\r\n  export default {\r\n    name: 'layout',\r\n    data() {\r\n      return {\r\n        isCollapse: false, // 左侧菜单栏是否折叠\r\n        sideBarWidth, // 左侧菜单栏展开的宽度\r\n        clientWidth: 0, // 页面宽度\r\n        clientHeight: 0, // 页面高度\r\n        foldState: false, // 控制左侧菜单栏按键\r\n        isPhone: false,\r\n      };\r\n    },\r\n    created() {\r\n    },\r\n    mounted() {\r\n      this.setResize();\r\n      // console.log(this.clientWidth)\r\n      if (this.clientWidth < 500) {\r\n        this.isPhone = true;\r\n      } else {\r\n        this.isPhone = false;\r\n        // 检测屏幕宽度, 确定默认是否展开\r\n        if (this.clientWidth <= 768) {\r\n          this.eventBus.$emit('removeSidebarSearch');\r\n          this.isCollapse = true;\r\n        } else {\r\n          this.isCollapse = false;\r\n          this.eventBus.$emit('showSidebarSearch');\r\n        }\r\n      }\r\n      // 监测屏幕宽度 折叠左侧菜单栏\r\n      window.onresize = () => {\r\n        this.setResize();\r\n        if (this.clientWidth <= 500) {\r\n          this.isPhone = true;\r\n        } else if (this.clientWidth <= 800) {\r\n          this.isPhone = false;\r\n        }\r\n\r\n        // if (_this.clientWidth <= 768) {\r\n        //   // 页面宽度 768\r\n        //   if (_this.isCollapse === false) {\r\n        //     _this.eventBus.$emit('removeSidebarSearch')\r\n        //     _this.isCollapse = true\r\n        //   }\r\n        // } else if (_this.isCollapse === true) {\r\n        //   _this.eventBus.$emit('showSidebarSearch')\r\n        //   _this.isCollapse = false\r\n        // }\r\n      };\r\n\r\n      this.eventBus.$on('noReuse', () => {\r\n        this.$refs.operate.style.height = '86px';\r\n      });\r\n      this.eventBus.$on('hasReuse', () => {\r\n        this.$refs.operate.style.height = '45px';\r\n      });\r\n    },\r\n    inject: ['eventBus'],\r\n    computed: {\r\n      elMenuCollapse() {\r\n        if (this.isPhone) {\r\n          return false;\r\n        }\r\n\r\n        return this.isCollapse;\r\n      },\r\n      asideStyle() {\r\n        const style = {};\r\n        if (this.isPhone) {\r\n          style.position = 'absolute';\r\n          style.height = `${this.clientHeight}px`;\r\n          style.zIndex = 12;\r\n          if (this.isCollapse === false) {\r\n            style.transform = `translateX(-${sideBarWidth})`;\r\n          } else {\r\n            style.transform = 'translateX(0)';\r\n          }\r\n        }\r\n        return style;\r\n      },\r\n    },\r\n    methods: {\r\n      // 控制菜单折叠\r\n      changeSlidebarState() {\r\n        this.isCollapse = !this.isCollapse;\r\n        if (this.isCollapse) {\r\n          this.eventBus.$emit('removeSidebarSearch');\r\n        } else {\r\n          this.eventBus.$emit('showSidebarSearch');\r\n        }\r\n        this.foldState = !this.foldState;\r\n      },\r\n      // 响应页面的宽度高度变化\r\n      setResize() {\r\n        this.clientHeight = document.body.clientHeight;\r\n        this.clientWidth = document.body.clientWidth;\r\n        this.$refs.appMain.$el.style.minHeight = `${this.clientHeight - totalHeight + 20}px`;\r\n      },\r\n    },\r\n    watch: {\r\n      isCollapse() {\r\n        if (this.isPhone) {\r\n          // 手机模式\r\n          this.sideBarWidth = sideBarWidth;\r\n          if (this.isCollapse === false) {\r\n            this.transX = 0;\r\n          } else {\r\n            this.transX = -1 * sideBarWidth;\r\n          }\r\n        } else {\r\n          this.transX = 0;\r\n          this.sideBarWidth = this.isCollapse === false ? sideBarWidth : '64px';\r\n        }\r\n      },\r\n      $route() {\r\n        this.showBackTop = false;\r\n        if (this.scrollY <= 70) {\r\n          // MenuTab组件高度\r\n          this.backTop();\r\n        }\r\n        if (this.isPhone && this.isCollapse) {\r\n          this.changeSlidebarState();\r\n        }\r\n      },\r\n    },\r\n    components: {\r\n      NavBar,\r\n      SideBar,\r\n      AppMain,\r\n      ReuseTab,\r\n      MenuTab,\r\n      BackTop,\r\n    },\r\n    beforeDestroy() {\r\n      this.eventBus.$off('noReuse');\r\n      this.eventBus.$off('hasReuse');\r\n    },\r\n  };\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .aside {\r\n        background: rgb(25, 42, 94);\r\n        overflow-x: hidden;\r\n\r\n        &::-webkit-scrollbar {\r\n            width: 0px;\r\n            height: 0px;\r\n        }\r\n    }\r\n\r\n    .header {\r\n        padding: 0;\r\n        background: $header-background;\r\n        height: $header-height !important;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        box-shadow: 0px 2px 6px 0px rgba(190, 204, 216, 0.4);\r\n        border-bottom: 1px solid rgba(190, 204, 216, 0.4);\r\n        z-index: 1;\r\n\r\n        .left {\r\n            height: 100%;\r\n            width: 100%;\r\n\r\n            .operate {\r\n                display: flex;\r\n                align-items: center;\r\n                background: $header-background;\r\n                padding-left: 20px;\r\n                height: 72px;\r\n\r\n                .iconfont {\r\n                    font-size: 16px;\r\n                    font-weight: 500;\r\n                    color: $right-side-font-color;\r\n                    cursor: pointer;\r\n                    transform: rotate(0deg);\r\n                    transition: all 0.3s linear;\r\n                    margin-right: 10px;\r\n\r\n                    &:hover {\r\n                        color: #3963bc;\r\n                    }\r\n                }\r\n\r\n                .rotate {\r\n                    transform: rotate(180deg);\r\n                    transition: all 0.3s linear;\r\n                }\r\n            }\r\n        }\r\n\r\n        .right-info {\r\n            display: flex;\r\n            align-items: center;\r\n        }\r\n    }\r\n\r\n    .el-main {\r\n        overflow-y: auto;\r\n        position: relative;\r\n        padding: 0;\r\n    }\r\n\r\n    .backTop {\r\n        position: fixed;\r\n        display: inline-block;\r\n        text-align: center;\r\n        cursor: pointer;\r\n        right: 50px;\r\n        bottom: 50px;\r\n        width: 22px;\r\n        height: 22px;\r\n        line-height: 22px;\r\n        border-radius: 50%;\r\n        z-index: 99;\r\n        background: #fff;\r\n\r\n        .iconfont {\r\n            font-size: 36px;\r\n        }\r\n    }\r\n\r\n    .sidenav-mask {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        background-color: rgba(0, 0, 0, 0.3);\r\n        z-index: 10;\r\n        display: none;\r\n        cursor: pointer;\r\n\r\n        &.show {\r\n            display: block;\r\n        }\r\n    }\r\n</style>\r\n"]}]}