{"remainingRequest":"/Users/long/Documents/Software Development Practices/code/lin-cms-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/long/Documents/Software Development Practices/code/lin-cms-vue/src/views/login/Login.vue?vue&type=style&index=0&id=2529d779&lang=scss&scoped=true&","dependencies":[{"path":"/Users/long/Documents/Software Development Practices/code/lin-cms-vue/src/views/login/Login.vue","mtime":1582644252727},{"path":"/Users/long/Documents/Software Development Practices/code/lin-cms-vue/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/long/Documents/Software Development Practices/code/lin-cms-vue/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/long/Documents/Software Development Practices/code/lin-cms-vue/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/long/Documents/Software Development Practices/code/lin-cms-vue/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/long/Documents/Software Development Practices/code/lin-cms-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/long/Documents/Software Development Practices/code/lin-cms-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.container {\n    width: 100%;\n    height: 100%;\n    background-image: url(\"../../assets/img/login-bg.jpg\");\n    background-size: cover;\n    position: fixed;\n}\n\n.title {\n    font-size: 48px;\n    margin-top: 120px;\n}\n\n.login-box {\n    width: 480px;\n    height: 380px;\n    margin: 80px auto;\n    text-align: center;\n}\n\n.bg-translucence {\n    background-color: rgba(255, 255, 255, .4);\n}\n\n.btn {\n    width: 440px;\n    height: 40px;\n}\n\n.login-btn {\n    margin-bottom: 16px;\n}\n\n.tourist-btn {\n    margin-left: -2px;\n}\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\n    <div class=\"container\">\n        <p class=\"title\">AchieveIt 软件项目管理平台</p>\n        <el-card class=\"login-box bg-translucence\" shadow=\"hover\">\n            <el-form ref=\"form\" label-position='left' :model=\"form\" :rules=\"rules\" :label-width='60'>\n                <el-form-item label=\"账号:\" prop=\"account\">\n                    <el-input v-model=\"form.username\"/>\n                </el-form-item>\n                <el-form-item label=\"密码:\" prop=\"password\">\n                    <el-input v-model=\"form.password\" type=\"password\"/>\n                </el-form-item>\n            </el-form>\n            <el-button type=\"primary\" class=\"login-btn btn\" @click=\"userLogin\"\n                       :loading=\"loading\" :disabled=\"loading\"\n            >\n                用户登录\n            </el-button>\n            <el-button class=\"tourist-btn btn\" @click=\"login\">游客登录</el-button>\n        </el-card>\n    </div>\n</template>\n\n<script>\n  import {mapActions, mapMutations} from 'vuex';\n  import User from '@/lin/models/user';\n  import Utils from '@/lin/utils/util';\n\n  export default {\n    data() {\n      return {\n        loading: false, // 加载动画\n        wait: 2000, // 2000ms之内不能重复发起请求\n        throttleLogin: null, // 节流登录\n        form: {\n          username: 'root',\n          password: '123456',\n        },\n        rules: {\n          account: [{\n            required: true,\n            message: \"请输入账号\"\n          }],\n          password: [{\n            required: true, message: \"请输入密码\"\n          }, {\n            min: 6, message: \"长度至少为6位\"\n          }]\n        }\n      };\n    },\n    methods: {\n      async userLogin(){\n        const {username, password} = this.form;\n        await this.login(username,password);\n      },\n      async touristLogin(){\n        await this.login()\n      },\n      async login(username,password) {\n        try {\n          this.loading = true;\n          await User.getToken(username, password);\n          await this.getInformation();\n          this.loading = false;\n          this.$router.push('/about');\n          this.$message.success('登录成功');\n        } catch (e) {\n          this.loading = false;\n          console.log(e);\n        }\n      },\n      async getInformation() {\n        try {\n          // 尝试获取当前用户信息\n          const user = await User.getPermissions();\n          this.setUserAndState(user);\n          this.setUserPermissions(user.permissions);\n        } catch (e) {\n          console.log(e);\n        }\n      },\n      ...mapActions(['setUserAndState']),\n      ...mapMutations({\n        setUserPermissions: 'SET_USER_PERMISSIONS',\n      }),\n    },\n    created() {\n      // 节流登录\n      this.throttleLogin = Utils.throttle(this.login, this.wait);\n    },\n  };\n</script>\n\n<style lang=\"scss\" scoped>\n    .container {\n        width: 100%;\n        height: 100%;\n        background-image: url(\"../../assets/img/login-bg.jpg\");\n        background-size: cover;\n        position: fixed;\n    }\n\n    .title {\n        font-size: 48px;\n        margin-top: 120px;\n    }\n\n    .login-box {\n        width: 480px;\n        height: 380px;\n        margin: 80px auto;\n        text-align: center;\n    }\n\n    .bg-translucence {\n        background-color: rgba(255, 255, 255, .4);\n    }\n\n    .btn {\n        width: 440px;\n        height: 40px;\n    }\n\n    .login-btn {\n        margin-bottom: 16px;\n    }\n\n    .tourist-btn {\n        margin-left: -2px;\n    }\n</style>\n"]}]}