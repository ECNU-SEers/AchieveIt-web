{"remainingRequest":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DownLoad\\git\\achieve\\AchieveIt-web\\src\\components\\notify\\notify.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\src\\components\\notify\\notify.vue","mtime":1584099524213},{"path":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Notify from '@/sys/models/notify';\nimport {mapGetters, mapActions} from 'vuex';\n\nexport default {\n  data() {\n    return {\n      notify: null,\n      unreadMessages: [\n        {id: 1, data: '您有一笔新订单'},\n        {id: 2, data: '新收款2459元'},\n        {id: 3, data: '您的套餐普洱森泉天然水已售完'},\n      ],\n      readedMessages: [\n        {id: 4, data: '订单12538239237已取消'},\n        {id: 5, data: '订单12538239237已取消'},\n        {id: 6, data: '您有一笔新订单了'},\n      ],\n    };\n  },\n  computed: {\n    ...mapGetters(['user']),\n  },\n  created() {\n    this.$nextTick(() => {\n      // this.initNotify()\n    });\n  },\n  methods: {\n    initNotify() {\n      if (this.user) {\n        this.notify = new Notify('notify/');\n        this.notify.initSse();\n      }\n    },\n    ...mapActions(['readMessage']),\n  },\n  // filters: {\n  //   motifyFmt(value) {\n  //     const fmt = JSON.parse(value)\n  //     // fmt.message fmt.time and others\n  //     return fmt.message\n  //   },\n  // },\n};\n",{"version":3,"sources":["notify.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"notify.vue","sourceRoot":"src/components/notify","sourcesContent":["<template>\r\n    <el-dropdown>\r\n        <div class=\"notify\">\r\n            <el-badge :value=\"3\" class=\"item\"><img class=\"icon-img\" src=\"@/assets/img/铃铛icon.png\"/></el-badge>\r\n        </div>\r\n        <el-dropdown-menu slot=\"dropdown\" style=\"position:relative;\">\r\n            <div class=\"notify-title\">\r\n                <p>消息提醒</p>\r\n                <p class=\"button\">全部已读</p>\r\n            </div>\r\n            <div class=\"left-border\"></div>\r\n            <el-dropdown-item\r\n                    v-for=\"unread in unreadMessages\"\r\n                    class=\"unread-messages\"\r\n                    :key=\"unread.id\"\r\n                    @click.native=\"readMessage(unread)\"\r\n            >\r\n                {{ unread.data }} <span class=\"date-time\">08-16 13:22:07</span>\r\n            </el-dropdown-item>\r\n            <el-dropdown-item v-for=\"readed in readedMessages\" :key=\"readed.id\" class=\"read-messages\">\r\n                {{ readed.data }} <span class=\"date-time\">08-16 13:22:07</span>\r\n            </el-dropdown-item>\r\n        </el-dropdown-menu>\r\n    </el-dropdown>\r\n</template>\r\n\r\n<script>\r\n  import Notify from '@/sys/models/notify';\r\n  import {mapGetters, mapActions} from 'vuex';\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        notify: null,\r\n        unreadMessages: [\r\n          {id: 1, data: '您有一笔新订单'},\r\n          {id: 2, data: '新收款2459元'},\r\n          {id: 3, data: '您的套餐普洱森泉天然水已售完'},\r\n        ],\r\n        readedMessages: [\r\n          {id: 4, data: '订单12538239237已取消'},\r\n          {id: 5, data: '订单12538239237已取消'},\r\n          {id: 6, data: '您有一笔新订单了'},\r\n        ],\r\n      };\r\n    },\r\n    computed: {\r\n      ...mapGetters(['user']),\r\n    },\r\n    created() {\r\n      this.$nextTick(() => {\r\n        // this.initNotify()\r\n      });\r\n    },\r\n    methods: {\r\n      initNotify() {\r\n        if (this.user) {\r\n          this.notify = new Notify('notify/');\r\n          this.notify.initSse();\r\n        }\r\n      },\r\n      ...mapActions(['readMessage']),\r\n    },\r\n    // filters: {\r\n    //   motifyFmt(value) {\r\n    //     const fmt = JSON.parse(value)\r\n    //     // fmt.message fmt.time and others\r\n    //     return fmt.message\r\n    //   },\r\n    // },\r\n  };\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .notify {\r\n        height: 36px;\r\n        width: 36px;\r\n        margin-right: 30px;\r\n        background: #0f1e4c;\r\n        border-radius: 50%;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        position: relative;\r\n        cursor: pointer;\r\n\r\n        .icon-img {\r\n            width: 18px;\r\n            height: 18px;\r\n        }\r\n    }\r\n\r\n    .el-popper {\r\n        padding-left: 10px;\r\n\r\n        .el-dropdown-menu__item:nth-child(3) {\r\n            &:after {\r\n                content: '';\r\n                position: absolute;\r\n                right: 38px;\r\n                top: -58px;\r\n                border-left: 10px solid transparent;\r\n                border-right: 10px solid transparent;\r\n                border-bottom: 10px solid #fff;\r\n            }\r\n        }\r\n\r\n        .el-dropdown-menu__item.unread-messages {\r\n            position: relative;\r\n\r\n            &:before {\r\n                content: '';\r\n                position: absolute;\r\n                height: 8px;\r\n                width: 8px;\r\n                border-radius: 50%;\r\n                top: 50%;\r\n                left: 5px;\r\n                transform: translateY(-50%);\r\n                background: #f4516c;\r\n            }\r\n        }\r\n\r\n        .el-dropdown-menu__item.read-messages {\r\n            position: relative;\r\n\r\n            &:before {\r\n                content: '';\r\n                position: absolute;\r\n                height: 8px;\r\n                width: 8px;\r\n                border-radius: 50%;\r\n                top: 50%;\r\n                left: 5px;\r\n                transform: translateY(-50%);\r\n                background: #ebedf2;\r\n            }\r\n        }\r\n    }\r\n\r\n    .notify-title {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        font-size: 14px;\r\n        color: #45526b;\r\n        margin-left: 5px;\r\n        margin-right: 15px;\r\n        padding-bottom: 8px;\r\n        height: 30px;\r\n        min-width: 150px;\r\n        border-bottom: 1px solid #dee2e6;\r\n\r\n        .button {\r\n            font-size: 12px;\r\n            border: 1px solid #596c8e;\r\n            border-radius: 2px;\r\n            cursor: pointer;\r\n            height: 20px;\r\n            line-height: 20px;\r\n            padding-left: 5px;\r\n            padding-right: 5px;\r\n        }\r\n    }\r\n\r\n    .left-border {\r\n        position: absolute;\r\n        box-sizing: border-box;\r\n        background: #fff;\r\n        width: 1px;\r\n        height: calc(100% - 90px);\r\n        top: 63px;\r\n        left: 18px;\r\n        border-left-color: rgb(235, 237, 242);\r\n        border-left-style: solid;\r\n        border-left-width: 1px;\r\n        border-image-source: initial;\r\n        border-image-slice: initial;\r\n        border-image-width: initial;\r\n        border-image-outset: initial;\r\n        border-image-repeat: initial;\r\n    }\r\n\r\n    .date-time {\r\n        float: right;\r\n        padding-left: 10px;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        color: #c4c9d2;\r\n    }\r\n\r\n    .notify /deep/ .el-badge__content.is-fixed {\r\n        transform-origin: center center;\r\n        transform: translateY(-50%) translateX(100%) scale(0.8) !important;\r\n    }\r\n\r\n    .notify /deep/ .el-badge__content {\r\n        border: 1px solid transparent !important;\r\n        line-height: 20px !important;\r\n    }\r\n</style>\r\n"]}]}