{"remainingRequest":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DownLoad\\git\\achieve\\AchieveIt-web\\src\\components\\layout\\SideBar.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\src\\components\\layout\\SideBar.vue","mtime":1584099524209},{"path":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {mapGetters} from 'vuex';\nimport Utils from '@/sys/utils/util';\nimport Config from '../../config/index';\n\nexport default {\n  data() {\n    return {\n      sidebar: '',\n      groups: [],\n      showSidebarSearch: Config.showSidebarSearch,\n      showSearchList: false,\n    };\n  },\n  inject: ['eventBus'],\n  props: {\n    isPhone: {\n      type: Boolean,\n      default: false,\n    },\n    isCollapse: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  created() {\n  },\n  mounted() {\n    this.eventBus.$on('removeSidebarSearch', () => {\n      this.showSidebarSearch = false;\n    });\n    this.eventBus.$on('showSidebarSearch', () => {\n      if (Config.showSidebarSearch) {\n        this.showSidebarSearch = true;\n      }\n    });\n  },\n  methods: {\n    goto(path) {\n      this.$router.push({\n        path,\n      });\n    },\n    filterIcon(icon) {\n      return icon.indexOf('/') !== -1;\n    },\n    handleChange(val) {\n      this.groups = [];\n      this.sidebar = '';\n      this.showSearchList = false;\n      this.$router.push(val);\n    },\n    toSearch() {\n      this.showSearchList = true;\n      setTimeout(() => {\n        this.$refs.searchInput.focus();\n      }, 200);\n    },\n    search(val) {\n      // if (!val) {\n      //   this.showSearchList = false\n      //   return\n      // }\n      this.groups = [];\n\n      // 深度遍历配置树, 摘取叶子节点作为路由部分\n      function deepTravel(config, fuc) {\n        if (Array.isArray(config)) {\n          config.forEach(subConfig => {\n            deepTravel(subConfig, fuc);\n          });\n        } else if (config.children) {\n          config.children.forEach(subConfig => {\n            deepTravel(subConfig, fuc);\n          });\n        } else {\n          fuc(config);\n        }\n      }\n\n      deepTravel(this.sideBarList, viewConfig => {\n        // 构造舞台view路由\n        if (viewConfig.title.includes(val)) {\n          const viewRouter = {};\n          viewRouter.path = viewConfig.path;\n          viewRouter.title = viewConfig.title;\n          viewRouter.key = Math.random();\n          this.groups.push(viewRouter);\n        }\n      });\n    },\n  },\n  computed: {\n    elMenuCollapse() {\n      if (this.isPhone) {\n        return false;\n      }\n\n      return this.isCollapse;\n    },\n    // 根据当前路由设置激活侧边栏\n    defaultActive() {\n      for (let i = this.stageInfo.length - 1; i >= 0; i -= 1) {\n        if (this.idMap[this.stageInfo[i].name]) {\n          return this.idMap[this.stageInfo[i].name];\n        }\n      }\n      return '';\n    },\n    stageInfo() {\n      return this.$store.getters.getStageInfo(this.$route.name);\n    },\n    // 由于index不支持symbol格式, 因此使用 idMap 进行映射\n    idMap() {\n      const {sideBarList} = this;\n      const mapData = {};\n      const deepTravel = (obj, fuc) => {\n        if (Array.isArray(obj)) {\n          obj.forEach(item => {\n            deepTravel(item, fuc);\n          });\n          return;\n        }\n        if (obj && obj.children) {\n          fuc(obj);\n          deepTravel(obj.children, fuc);\n          return;\n        }\n        if (obj.name) {\n          fuc(obj);\n        }\n      };\n      deepTravel(sideBarList, item => {\n        mapData[item.name] = Utils.getRandomStr();\n      });\n\n      return mapData;\n    },\n    imgSrc() {\n      return this.elMenuCollapse === false ? '../../assets/img/left-logo.png' : '../../assets/img/logo.png';\n    },\n    ...mapGetters(['sideBarList']),\n  },\n};\n",{"version":3,"sources":["SideBar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SideBar.vue","sourceRoot":"src/components/layout","sourcesContent":["<template>\r\n    <div class=\"app-sidebar\">\r\n        <div class=\"logo\" v-if=\"!elMenuCollapse\"><img src=\"../../assets/img/logo.png\" alt=\"\"/></div>\r\n        <div class=\"mobile-logo\" v-else><img src=\"../../assets/img/mobile-logo.png\" alt=\"\"/></div>\r\n        <div style=\"margin-bottom:50px\">\r\n            <div v-if=\"showSidebarSearch\" style=\"margin-top: 15px\">\r\n                <div class=\"search-display\" v-if=\"!showSearchList\" @click=\"toSearch\"><i class=\"el-icon-search\"></i>\r\n                </div>\r\n                <el-select\r\n                        v-if=\"showSearchList\"\r\n                        size=\"medium\"\r\n                        filterable\r\n                        clearable\r\n                        :filter-method=\"search\"\r\n                        v-model=\"sidebar\"\r\n                        @change=\"handleChange\"\r\n                        class=\"search\"\r\n                        placeholder=\"请输入关键字\"\r\n                        ref=\"searchInput\"\r\n                >\r\n                    <el-option v-for=\"item in groups\" :key=\"item.key\" :label=\"item.title\"\r\n                               :value=\"item.path\"></el-option>\r\n                </el-select>\r\n            </div>\r\n            <el-menu\r\n                    class=\"el-menu-vertical-demo\"\r\n                    ref=\"meun\"\r\n                    :default-active=\"defaultActive\"\r\n                    :collapse=\"elMenuCollapse\"\r\n                    background-color=\"#192A5E\"\r\n                    text-color=\"rgba(196,201,210,1)\"\r\n                    active-text-color=\"#1890ff\"\r\n            >\r\n                <template v-for=\"item in sideBarList\">\r\n                    <el-submenu\r\n                            class=\"subMenuContent\"\r\n                            v-if=\"item.children\"\r\n                            :key=\"idMap[item.name]\"\r\n                            :index=\"idMap[item.name]\"\r\n                            popper-class=\"abc\"\r\n                    >\r\n                        <template slot=\"title\">\r\n                            <i v-if=\"!filterIcon(item.icon)\" :class=\"item.icon\"></i> <img v-else :src=\"item.icon\"\r\n                                                                                          class=\"imgIcon\"/>\r\n                            <span slot=\"title\">{{ item.title }}</span>\r\n                        </template>\r\n\r\n                        <!-- 二级菜单 -->\r\n                        <template v-for=\"subItem in item.children\">\r\n                            <el-submenu\r\n                                    v-if=\"subItem.children\"\r\n                                    :key=\"idMap[subItem.name]\"\r\n                                    :index=\"idMap[subItem.name]\"\r\n                                    class=\"subMenuContent\"\r\n                            >\r\n                                <template slot=\"title\">\r\n                                    <i class=\"iconfont icon-erjizhibiao\"></i>\r\n                                    <span slot=\"title\" class=\"two-folder\">{{ subItem.title }}</span>\r\n                                </template>\r\n\r\n                                <!-- 三级菜单 -->\r\n                                <router-link\r\n                                        v-for=\"grandchildItem in subItem.children\"\r\n                                        :key=\"idMap[grandchildItem.name]\"\r\n                                        :to=\"grandchildItem.path\"\r\n                                        class=\"circle third\"\r\n                                >\r\n                                    <el-menu-item :index=\"idMap[grandchildItem.name]\" style=\"padding-left: 80px;\"\r\n                                                  class=\"subMenuContent\">\r\n                                        {{ grandchildItem.title }}\r\n                                    </el-menu-item>\r\n                                </router-link>\r\n                            </el-submenu>\r\n                            <!-- 二级else -->\r\n                            <router-link :to=\"subItem.path\" :key=\"subItem.name\" class=\"circle\" v-else>\r\n                                <el-menu-item :index=\"idMap[subItem.name]\" style=\"padding-left: 60px;\"\r\n                                              class=\"subMenuContent\">\r\n                                    {{ subItem.title }}\r\n                                </el-menu-item>\r\n                            </router-link>\r\n                        </template>\r\n                    </el-submenu>\r\n\r\n                    <!-- 一级else -->\r\n                    <el-menu-item\r\n                            class=\"subMenuContent\"\r\n                            :index=\"idMap[item.name]\"\r\n                            @click=\"goto(item.path)\"\r\n                            v-else\r\n                            :key=\"idMap[item.name]\"\r\n                    >\r\n                        <i v-if=\"!filterIcon(item.icon)\" :class=\"item.icon\"></i> <img v-else :src=\"item.icon\"\r\n                                                                                      class=\"imgIcon\"/>\r\n                        <span slot=\"title\">{{ item.title }}</span>\r\n                    </el-menu-item>\r\n                </template>\r\n            </el-menu>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  import {mapGetters} from 'vuex';\r\n  import Utils from '@/sys/utils/util';\r\n  import Config from '../../config/index';\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        sidebar: '',\r\n        groups: [],\r\n        showSidebarSearch: Config.showSidebarSearch,\r\n        showSearchList: false,\r\n      };\r\n    },\r\n    inject: ['eventBus'],\r\n    props: {\r\n      isPhone: {\r\n        type: Boolean,\r\n        default: false,\r\n      },\r\n      isCollapse: {\r\n        type: Boolean,\r\n        default: false,\r\n      },\r\n    },\r\n    created() {\r\n    },\r\n    mounted() {\r\n      this.eventBus.$on('removeSidebarSearch', () => {\r\n        this.showSidebarSearch = false;\r\n      });\r\n      this.eventBus.$on('showSidebarSearch', () => {\r\n        if (Config.showSidebarSearch) {\r\n          this.showSidebarSearch = true;\r\n        }\r\n      });\r\n    },\r\n    methods: {\r\n      goto(path) {\r\n        this.$router.push({\r\n          path,\r\n        });\r\n      },\r\n      filterIcon(icon) {\r\n        return icon.indexOf('/') !== -1;\r\n      },\r\n      handleChange(val) {\r\n        this.groups = [];\r\n        this.sidebar = '';\r\n        this.showSearchList = false;\r\n        this.$router.push(val);\r\n      },\r\n      toSearch() {\r\n        this.showSearchList = true;\r\n        setTimeout(() => {\r\n          this.$refs.searchInput.focus();\r\n        }, 200);\r\n      },\r\n      search(val) {\r\n        // if (!val) {\r\n        //   this.showSearchList = false\r\n        //   return\r\n        // }\r\n        this.groups = [];\r\n\r\n        // 深度遍历配置树, 摘取叶子节点作为路由部分\r\n        function deepTravel(config, fuc) {\r\n          if (Array.isArray(config)) {\r\n            config.forEach(subConfig => {\r\n              deepTravel(subConfig, fuc);\r\n            });\r\n          } else if (config.children) {\r\n            config.children.forEach(subConfig => {\r\n              deepTravel(subConfig, fuc);\r\n            });\r\n          } else {\r\n            fuc(config);\r\n          }\r\n        }\r\n\r\n        deepTravel(this.sideBarList, viewConfig => {\r\n          // 构造舞台view路由\r\n          if (viewConfig.title.includes(val)) {\r\n            const viewRouter = {};\r\n            viewRouter.path = viewConfig.path;\r\n            viewRouter.title = viewConfig.title;\r\n            viewRouter.key = Math.random();\r\n            this.groups.push(viewRouter);\r\n          }\r\n        });\r\n      },\r\n    },\r\n    computed: {\r\n      elMenuCollapse() {\r\n        if (this.isPhone) {\r\n          return false;\r\n        }\r\n\r\n        return this.isCollapse;\r\n      },\r\n      // 根据当前路由设置激活侧边栏\r\n      defaultActive() {\r\n        for (let i = this.stageInfo.length - 1; i >= 0; i -= 1) {\r\n          if (this.idMap[this.stageInfo[i].name]) {\r\n            return this.idMap[this.stageInfo[i].name];\r\n          }\r\n        }\r\n        return '';\r\n      },\r\n      stageInfo() {\r\n        return this.$store.getters.getStageInfo(this.$route.name);\r\n      },\r\n      // 由于index不支持symbol格式, 因此使用 idMap 进行映射\r\n      idMap() {\r\n        const {sideBarList} = this;\r\n        const mapData = {};\r\n        const deepTravel = (obj, fuc) => {\r\n          if (Array.isArray(obj)) {\r\n            obj.forEach(item => {\r\n              deepTravel(item, fuc);\r\n            });\r\n            return;\r\n          }\r\n          if (obj && obj.children) {\r\n            fuc(obj);\r\n            deepTravel(obj.children, fuc);\r\n            return;\r\n          }\r\n          if (obj.name) {\r\n            fuc(obj);\r\n          }\r\n        };\r\n        deepTravel(sideBarList, item => {\r\n          mapData[item.name] = Utils.getRandomStr();\r\n        });\r\n\r\n        return mapData;\r\n      },\r\n      imgSrc() {\r\n        return this.elMenuCollapse === false ? '../../assets/img/left-logo.png' : '../../assets/img/logo.png';\r\n      },\r\n      ...mapGetters(['sideBarList']),\r\n    },\r\n  };\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    ::-webkit-scrollbar {\r\n        width: 0px;\r\n        height: 0px;\r\n    }\r\n\r\n    .app-sidebar {\r\n        background: #192a5e;\r\n\r\n        &::-webkit-scrollbar {\r\n            width: 0px;\r\n            height: 0px;\r\n        }\r\n\r\n        .subMenuContent {\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            white-space: nowrap;\r\n        }\r\n\r\n        .logo {\r\n            width: $sidebar-width;\r\n            height: $header-height;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            font-size: 30px;\r\n            color: #fff;\r\n            transition: all 0.5s ease-in-out;\r\n            background-color: #122150;\r\n            transition: all 0.3s linear;\r\n            position: sticky;\r\n            top: 0;\r\n            left: 0;\r\n            z-index: 99;\r\n\r\n            img {\r\n                width: 120px;\r\n                transition: all 0.3s linear;\r\n            }\r\n        }\r\n\r\n        .mobile-logo {\r\n            width: 64px;\r\n            height: 86px;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            background-color: #122150;\r\n            transition: all 0.3s linear;\r\n\r\n            img {\r\n                width: 40px;\r\n                height: 40px;\r\n                transition: all 0.3s linear;\r\n            }\r\n        }\r\n\r\n        .imgIcon {\r\n            width: 16px;\r\n            height: 16px;\r\n            margin-right: 10px;\r\n            margin-left: 5px;\r\n            display: inline-block;\r\n            transform: translateY(21px);\r\n        }\r\n\r\n        .iconfont {\r\n            margin-right: 10px;\r\n            margin-left: 5px;\r\n            color: $submenu-title;\r\n            height: $menuItem-height;\r\n        }\r\n\r\n        .search-display {\r\n            position: relative;\r\n            width: 80%;\r\n            margin: 0 auto;\r\n            height: 36px;\r\n            border-bottom: 1px rgb(185, 190, 195) solid;\r\n            cursor: pointer;\r\n\r\n            .el-icon-search {\r\n                position: absolute;\r\n                left: 1px;\r\n                top: 10px;\r\n                color: rgb(185, 190, 195);\r\n            }\r\n        }\r\n\r\n        .search {\r\n            // margin-top: 20px;\r\n            width: 80%;\r\n        }\r\n    }\r\n</style>\r\n"]}]}