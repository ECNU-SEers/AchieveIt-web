{"remainingRequest":"/Users/syj/Git-Portal/AchieveIt-web/node_modules/babel-loader/lib/index.js!/Users/syj/Git-Portal/AchieveIt-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/syj/Git-Portal/AchieveIt-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/syj/Git-Portal/AchieveIt-web/src/views/login/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/syj/Git-Portal/AchieveIt-web/src/views/login/Login.vue","mtime":1583737757311},{"path":"/Users/syj/Git-Portal/AchieveIt-web/node_modules/cache-loader/dist/cjs.js","mtime":1583737753486},{"path":"/Users/syj/Git-Portal/AchieveIt-web/node_modules/babel-loader/lib/index.js","mtime":1583737753370},{"path":"/Users/syj/Git-Portal/AchieveIt-web/node_modules/cache-loader/dist/cjs.js","mtime":1583737753486},{"path":"/Users/syj/Git-Portal/AchieveIt-web/node_modules/vue-loader/lib/index.js","mtime":1583737757117}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"/Users/syj/Git-Portal/AchieveIt-web/node_modules/@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapActions, mapMutations } from 'vuex';\nimport User from '@/sys/models/user';\nimport Utils from '@/sys/utils/util';\nexport default {\n  data: function data() {\n    return {\n      loading: false,\n      // 加载动画\n      wait: 2000,\n      // 2000ms之内不能重复发起请求\n      throttleLogin: null,\n      // 节流登录\n      form: {\n        username: 'root',\n        password: '123456'\n      },\n      rules: {\n        account: [{\n          required: true,\n          message: \"请输入账号\"\n        }],\n        password: [{\n          required: true,\n          message: \"请输入密码\"\n        }, {\n          min: 6,\n          message: \"长度至少为6位\"\n        }]\n      }\n    };\n  },\n  methods: _objectSpread({\n    userLogin: function () {\n      var _userLogin = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this$form, username, password;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$form = this.form, username = _this$form.username, password = _this$form.password;\n                _context.next = 3;\n                return this.login(username, password);\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function userLogin() {\n        return _userLogin.apply(this, arguments);\n      }\n\n      return userLogin;\n    }(),\n    touristLogin: function () {\n      var _touristLogin = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.login();\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function touristLogin() {\n        return _touristLogin.apply(this, arguments);\n      }\n\n      return touristLogin;\n    }(),\n    login: function () {\n      var _login = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(username, password) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                this.loading = true;\n                _context3.next = 4;\n                return User.getToken(username, password);\n\n              case 4:\n                _context3.next = 6;\n                return this.getInformation();\n\n              case 6:\n                this.loading = false;\n                this.$router.push('/about');\n                this.$message.success('登录成功');\n                _context3.next = 15;\n                break;\n\n              case 11:\n                _context3.prev = 11;\n                _context3.t0 = _context3[\"catch\"](0);\n                this.loading = false;\n                console.log(_context3.t0);\n\n              case 15:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 11]]);\n      }));\n\n      function login(_x, _x2) {\n        return _login.apply(this, arguments);\n      }\n\n      return login;\n    }(),\n    getInformation: function () {\n      var _getInformation = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        var user;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return User.getPermissions();\n\n              case 3:\n                user = _context4.sent;\n                this.setUserAndState(user);\n                this.setUserPermissions(user.permissions);\n                _context4.next = 11;\n                break;\n\n              case 8:\n                _context4.prev = 8;\n                _context4.t0 = _context4[\"catch\"](0);\n                console.log(_context4.t0);\n\n              case 11:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 8]]);\n      }));\n\n      function getInformation() {\n        return _getInformation.apply(this, arguments);\n      }\n\n      return getInformation;\n    }()\n  }, mapActions(['setUserAndState']), {}, mapMutations({\n    setUserPermissions: 'SET_USER_PERMISSIONS'\n  })),\n  created: function created() {\n    // 节流登录\n    this.throttleLogin = Utils.throttle(this.login, this.wait);\n  }\n};",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuBA,SAAA,UAAA,EAAA,YAAA,QAAA,MAAA;AACA,OAAA,IAAA,MAAA,mBAAA;AACA,OAAA,KAAA,MAAA,kBAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AACA;AACA,MAAA,IAAA,EAAA,IAFA;AAEA;AACA,MAAA,aAAA,EAAA,IAHA;AAGA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,QAAA,EAAA,MADA;AAEA,QAAA,QAAA,EAAA;AAFA,OAJA;AAQA,MAAA,KAAA,EAAA;AACA,QAAA,OAAA,EAAA,CAAA;AACA,UAAA,QAAA,EAAA,IADA;AAEA,UAAA,OAAA,EAAA;AAFA,SAAA,CADA;AAKA,QAAA,QAAA,EAAA,CAAA;AACA,UAAA,QAAA,EAAA,IADA;AACA,UAAA,OAAA,EAAA;AADA,SAAA,EAEA;AACA,UAAA,GAAA,EAAA,CADA;AACA,UAAA,OAAA,EAAA;AADA,SAFA;AALA;AARA,KAAA;AAoBA,GAtBA;AAuBA,EAAA,OAAA;AACA,IAAA,SADA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,6BAEA,KAAA,IAFA,EAEA,QAFA,cAEA,QAFA,EAEA,QAFA,cAEA,QAFA;AAAA;AAAA,uBAGA,KAAA,KAAA,CAAA,QAAA,EAAA,QAAA,CAHA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAKA,IAAA,YALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAMA,KAAA,KAAA,EANA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAQA,IAAA,KARA;AAAA;AAAA;AAAA,iDAQA,QARA,EAQA,QARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA,qBAAA,OAAA,GAAA,IAAA;AAVA;AAAA,uBAWA,IAAA,CAAA,QAAA,CAAA,QAAA,EAAA,QAAA,CAXA;;AAAA;AAAA;AAAA,uBAYA,KAAA,cAAA,EAZA;;AAAA;AAaA,qBAAA,OAAA,GAAA,KAAA;AACA,qBAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA,qBAAA,QAAA,CAAA,OAAA,CAAA,MAAA;AAfA;AAAA;;AAAA;AAAA;AAAA;AAiBA,qBAAA,OAAA,GAAA,KAAA;AACA,gBAAA,OAAA,CAAA,GAAA;;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAqBA,IAAA,cArBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAwBA,IAAA,CAAA,cAAA,EAxBA;;AAAA;AAwBA,gBAAA,IAxBA;AAyBA,qBAAA,eAAA,CAAA,IAAA;AACA,qBAAA,kBAAA,CAAA,IAAA,CAAA,WAAA;AA1BA;AAAA;;AAAA;AAAA;AAAA;AA4BA,gBAAA,OAAA,CAAA,GAAA;;AA5BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,KA+BA,UAAA,CAAA,CAAA,iBAAA,CAAA,CA/BA,MAgCA,YAAA,CAAA;AACA,IAAA,kBAAA,EAAA;AADA,GAAA,CAhCA,CAvBA;AA2DA,EAAA,OA3DA,qBA2DA;AACA;AACA,SAAA,aAAA,GAAA,KAAA,CAAA,QAAA,CAAA,KAAA,KAAA,EAAA,KAAA,IAAA,CAAA;AACA;AA9DA,CAAA","sourcesContent":["<template>\n    <div class=\"container\">\n        <p class=\"title\">AchieveIt 软件项目管理平台</p>\n        <el-card class=\"login-box bg-translucence\" shadow=\"hover\">\n            <el-form ref=\"form\" label-position='left' :model=\"form\" :rules=\"rules\" label-width='60'>\n                <el-form-item label=\"账号:\" prop=\"account\">\n                    <el-input v-model=\"form.username\"/>\n                </el-form-item>\n                <el-form-item label=\"密码:\" prop=\"password\">\n                    <el-input v-model=\"form.password\" type=\"password\"/>\n                </el-form-item>\n            </el-form>\n            <el-button type=\"primary\" class=\"login-btn btn\" @click=\"userLogin\"\n                       :loading=\"loading\" :disabled=\"loading\"\n            >\n                登录\n            </el-button>\n            <!--            <el-button class=\"tourist-btn btn\" @click=\"login\">游客登录</el-button>-->\n        </el-card>\n    </div>\n</template>\n\n<script>\n  import {mapActions, mapMutations} from 'vuex';\n  import User from '@/sys/models/user';\n  import Utils from '@/sys/utils/util';\n  export default {\n    data() {\n      return {\n        loading: false, // 加载动画\n        wait: 2000, // 2000ms之内不能重复发起请求\n        throttleLogin: null, // 节流登录\n        form: {\n          username: 'root',\n          password: '123456',\n        },\n        rules: {\n          account: [{\n            required: true,\n            message: \"请输入账号\"\n          }],\n          password: [{\n            required: true, message: \"请输入密码\"\n          }, {\n            min: 6, message: \"长度至少为6位\"\n          }]\n        }\n      };\n    },\n    methods: {\n      async userLogin() {\n        const {username, password} = this.form;\n        await this.login(username, password);\n      },\n      async touristLogin() {\n        await this.login();\n      },\n      async login(username, password) {\n        try {\n          this.loading = true;\n          await User.getToken(username, password);\n          await this.getInformation();\n          this.loading = false;\n          this.$router.push('/about');\n          this.$message.success('登录成功');\n        } catch (e) {\n          this.loading = false;\n          console.log(e);\n        }\n      },\n      async getInformation() {\n        try {\n          // 尝试获取当前用户信息\n          const user = await User.getPermissions();\n          this.setUserAndState(user);\n          this.setUserPermissions(user.permissions);\n        } catch (e) {\n          console.log(e);\n        }\n      },\n      ...mapActions(['setUserAndState']),\n      ...mapMutations({\n        setUserPermissions: 'SET_USER_PERMISSIONS',\n      }),\n    },\n    created() {\n      // 节流登录\n      this.throttleLogin = Utils.throttle(this.login, this.wait);\n    },\n  };\n</script>\n\n<style lang=\"scss\" scoped>\n    .container {\n        width: 100%;\n        height: 100%;\n        background-image: url(\"../../assets/img/login-bg.jpg\");\n        background-size: cover;\n        position: fixed;\n    }\n\n    .title {\n        font-size: 48px;\n        margin-top: 160px;\n    }\n\n    .login-box {\n        width: 480px;\n        height: 320px;\n        margin: 80px auto;\n        text-align: center;\n    }\n\n    .bg-translucence {\n        background-color: rgba(255, 255, 255, .4);\n    }\n\n    .btn {\n        width: 440px;\n        height: 40px;\n    }\n\n    .login-btn {\n        margin-bottom: 16px;\n    }\n\n    .tourist-btn {\n        margin-left: -2px;\n    }\n</style>\n"],"sourceRoot":"src/views/login"}]}