{"remainingRequest":"/Users/reed/Desktop/AchieveIt-web/AchieveIt-web/node_modules/babel-loader/lib/index.js!/Users/reed/Desktop/AchieveIt-web/AchieveIt-web/node_modules/eslint-loader/index.js??ref--13-0!/Users/reed/Desktop/AchieveIt-web/AchieveIt-web/src/sys/directives/authorize.js","dependencies":[{"path":"/Users/reed/Desktop/AchieveIt-web/AchieveIt-web/src/sys/directives/authorize.js","mtime":1583897315000},{"path":"/Users/reed/Desktop/AchieveIt-web/AchieveIt-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/reed/Desktop/AchieveIt-web/AchieveIt-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/reed/Desktop/AchieveIt-web/AchieveIt-web/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import Vue from 'vue';\nimport store from '@/store';\n\nfunction isAllowed(permission, user, permissions) {\n  if (user.admin) {\n    return true;\n  }\n\n  if (typeof permission === 'string') {\n    return permissions.includes(permission);\n  }\n\n  if (permission instanceof Array) {\n    return permission.some(function (auth) {\n      return permissions.indexOf(auth) >= 0;\n    });\n  }\n\n  return false;\n}\n\nVue.directive('permission', {\n  bind: function bind(el, binding) {\n    var permission;\n    var type;\n\n    if (Object.prototype.toString.call(binding.value) === '[object Object]') {\n      // eslint-disable-next-line prefer-destructuring\n      permission = binding.value.permission; // eslint-disable-next-line prefer-destructuring\n\n      type = binding.value.type;\n    } else {\n      permission = binding.value;\n    }\n\n    var isAllow = isAllowed(permission, store.state.user || {}, store.state.permissions);\n    var element = el;\n\n    if (!isAllow && permission) {\n      if (type) {\n        element.disabled = true;\n        element.style.opacity = 0.4;\n        element.style.cursor = 'not-allowed';\n      } else {\n        element.style.display = 'none';\n      }\n    }\n  }\n});\nexport default Vue.directive('permission');",{"version":3,"sources":["/Users/reed/Desktop/AchieveIt-web/AchieveIt-web/src/sys/directives/authorize.js"],"names":["Vue","store","isAllowed","permission","user","permissions","admin","includes","Array","some","auth","indexOf","directive","bind","el","binding","type","Object","prototype","toString","call","value","isAllow","state","element","disabled","style","opacity","cursor","display"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,SAAlB;;AAEA,SAASC,SAAT,CAAmBC,UAAnB,EAA+BC,IAA/B,EAAqCC,WAArC,EAAkD;AAChD,MAAID,IAAI,CAACE,KAAT,EAAgB;AACd,WAAO,IAAP;AACD;;AACD,MAAI,OAAOH,UAAP,KAAsB,QAA1B,EAAoC;AAClC,WAAOE,WAAW,CAACE,QAAZ,CAAqBJ,UAArB,CAAP;AACD;;AACD,MAAIA,UAAU,YAAYK,KAA1B,EAAiC;AAC/B,WAAOL,UAAU,CAACM,IAAX,CAAgB,UAAAC,IAAI;AAAA,aAAIL,WAAW,CAACM,OAAZ,CAAoBD,IAApB,KAA6B,CAAjC;AAAA,KAApB,CAAP;AACD;;AACD,SAAO,KAAP;AACD;;AAEDV,GAAG,CAACY,SAAJ,CAAc,YAAd,EAA4B;AAC1BC,EAAAA,IAD0B,gBACrBC,EADqB,EACjBC,OADiB,EACR;AAChB,QAAIZ,UAAJ;AACA,QAAIa,IAAJ;;AACA,QAAIC,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BL,OAAO,CAACM,KAAvC,MAAkD,iBAAtD,EAAyE;AACvE;AACAlB,MAAAA,UAAU,GAAGY,OAAO,CAACM,KAAR,CAAclB,UAA3B,CAFuE,CAGvE;;AACAa,MAAAA,IAAI,GAAGD,OAAO,CAACM,KAAR,CAAcL,IAArB;AACD,KALD,MAKO;AACLb,MAAAA,UAAU,GAAGY,OAAO,CAACM,KAArB;AACD;;AACD,QAAMC,OAAO,GAAGpB,SAAS,CAACC,UAAD,EAAaF,KAAK,CAACsB,KAAN,CAAYnB,IAAZ,IAAoB,EAAjC,EAAqCH,KAAK,CAACsB,KAAN,CAAYlB,WAAjD,CAAzB;AACA,QAAMmB,OAAO,GAAGV,EAAhB;;AACA,QAAI,CAACQ,OAAD,IAAYnB,UAAhB,EAA4B;AAC1B,UAAIa,IAAJ,EAAU;AACRQ,QAAAA,OAAO,CAACC,QAAR,GAAmB,IAAnB;AACAD,QAAAA,OAAO,CAACE,KAAR,CAAcC,OAAd,GAAwB,GAAxB;AACAH,QAAAA,OAAO,CAACE,KAAR,CAAcE,MAAd,GAAuB,aAAvB;AACD,OAJD,MAIO;AACLJ,QAAAA,OAAO,CAACE,KAAR,CAAcG,OAAd,GAAwB,MAAxB;AACD;AACF;AACF;AAvByB,CAA5B;AA0BA,eAAe7B,GAAG,CAACY,SAAJ,CAAc,YAAd,CAAf","sourcesContent":["import Vue from 'vue';\r\nimport store from '@/store';\r\n\r\nfunction isAllowed(permission, user, permissions) {\r\n  if (user.admin) {\r\n    return true;\r\n  }\r\n  if (typeof permission === 'string') {\r\n    return permissions.includes(permission);\r\n  }\r\n  if (permission instanceof Array) {\r\n    return permission.some(auth => permissions.indexOf(auth) >= 0);\r\n  }\r\n  return false;\r\n}\r\n\r\nVue.directive('permission', {\r\n  bind(el, binding) {\r\n    let permission;\r\n    let type;\r\n    if (Object.prototype.toString.call(binding.value) === '[object Object]') {\r\n      // eslint-disable-next-line prefer-destructuring\r\n      permission = binding.value.permission;\r\n      // eslint-disable-next-line prefer-destructuring\r\n      type = binding.value.type;\r\n    } else {\r\n      permission = binding.value;\r\n    }\r\n    const isAllow = isAllowed(permission, store.state.user || {}, store.state.permissions);\r\n    const element = el;\r\n    if (!isAllow && permission) {\r\n      if (type) {\r\n        element.disabled = true;\r\n        element.style.opacity = 0.4;\r\n        element.style.cursor = 'not-allowed';\r\n      } else {\r\n        element.style.display = 'none';\r\n      }\r\n    }\r\n  },\r\n});\r\n\r\nexport default Vue.directive('permission');\r\n"]}]}