{"remainingRequest":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\babel-loader\\lib\\index.js!D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DownLoad\\git\\achieve\\AchieveIt-web\\src\\views\\login\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\src\\views\\login\\Login.vue","mtime":1584099524347},{"path":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DownLoad\\git\\achieve\\AchieveIt-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"D:\\\\DownLoad\\\\git\\\\achieve\\\\AchieveIt-web\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapActions, mapMutations } from 'vuex';\nimport User from '@/sys/models/user';\nimport Utils from '@/sys/utils/util';\nexport default {\n  data: function data() {\n    return {\n      loading: false,\n      // 加载动画\n      wait: 2000,\n      // 2000ms之内不能重复发起请求\n      throttleLogin: null,\n      // 节流登录\n      form: {\n        username: 'root',\n        password: '123456'\n      },\n      rules: {\n        account: [{\n          required: true,\n          message: \"请输入账号\"\n        }],\n        password: [{\n          required: true,\n          message: \"请输入密码\"\n        }, {\n          min: 6,\n          message: \"长度至少为6位\"\n        }]\n      }\n    };\n  },\n  methods: _objectSpread({\n    userLogin: function () {\n      var _userLogin = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this$form, username, password;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$form = this.form, username = _this$form.username, password = _this$form.password;\n                _context.next = 3;\n                return this.login(username, password);\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function userLogin() {\n        return _userLogin.apply(this, arguments);\n      }\n\n      return userLogin;\n    }(),\n    touristLogin: function () {\n      var _touristLogin = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.login();\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function touristLogin() {\n        return _touristLogin.apply(this, arguments);\n      }\n\n      return touristLogin;\n    }(),\n    login: function () {\n      var _login = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(username, password) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                this.loading = true;\n                _context3.next = 4;\n                return User.getToken(username, password);\n\n              case 4:\n                _context3.next = 6;\n                return this.getInformation();\n\n              case 6:\n                this.loading = false;\n                this.$router.push('/about');\n                this.$message.success('登录成功');\n                _context3.next = 15;\n                break;\n\n              case 11:\n                _context3.prev = 11;\n                _context3.t0 = _context3[\"catch\"](0);\n                this.loading = false;\n                console.log(_context3.t0);\n\n              case 15:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 11]]);\n      }));\n\n      function login(_x, _x2) {\n        return _login.apply(this, arguments);\n      }\n\n      return login;\n    }(),\n    getInformation: function () {\n      var _getInformation = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        var user;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return User.getPermissions();\n\n              case 3:\n                user = _context4.sent;\n                this.setUserAndState(user);\n                this.setUserPermissions(user.permissions);\n                _context4.next = 11;\n                break;\n\n              case 8:\n                _context4.prev = 8;\n                _context4.t0 = _context4[\"catch\"](0);\n                console.log(_context4.t0);\n\n              case 11:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 8]]);\n      }));\n\n      function getInformation() {\n        return _getInformation.apply(this, arguments);\n      }\n\n      return getInformation;\n    }()\n  }, mapActions(['setUserAndState']), {}, mapMutations({\n    setUserPermissions: 'SET_USER_PERMISSIONS'\n  })),\n  created: function created() {\n    // 节流登录\n    this.throttleLogin = Utils.throttle(this.login, this.wait);\n  }\n};",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuBA,SAAA,UAAA,EAAA,YAAA,QAAA,MAAA;AACA,OAAA,IAAA,MAAA,mBAAA;AACA,OAAA,KAAA,MAAA,kBAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AACA;AACA,MAAA,IAAA,EAAA,IAFA;AAEA;AACA,MAAA,aAAA,EAAA,IAHA;AAGA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,QAAA,EAAA,MADA;AAEA,QAAA,QAAA,EAAA;AAFA,OAJA;AAQA,MAAA,KAAA,EAAA;AACA,QAAA,OAAA,EAAA,CAAA;AACA,UAAA,QAAA,EAAA,IADA;AAEA,UAAA,OAAA,EAAA;AAFA,SAAA,CADA;AAKA,QAAA,QAAA,EAAA,CAAA;AACA,UAAA,QAAA,EAAA,IADA;AACA,UAAA,OAAA,EAAA;AADA,SAAA,EAEA;AACA,UAAA,GAAA,EAAA,CADA;AACA,UAAA,OAAA,EAAA;AADA,SAFA;AALA;AARA,KAAA;AAoBA,GAtBA;AAuBA,EAAA,OAAA;AACA,IAAA,SADA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,6BAEA,KAAA,IAFA,EAEA,QAFA,cAEA,QAFA,EAEA,QAFA,cAEA,QAFA;AAAA;AAAA,uBAGA,KAAA,KAAA,CAAA,QAAA,EAAA,QAAA,CAHA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAKA,IAAA,YALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAMA,KAAA,KAAA,EANA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAQA,IAAA,KARA;AAAA;AAAA;AAAA,iDAQA,QARA,EAQA,QARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA,qBAAA,OAAA,GAAA,IAAA;AAVA;AAAA,uBAWA,IAAA,CAAA,QAAA,CAAA,QAAA,EAAA,QAAA,CAXA;;AAAA;AAAA;AAAA,uBAYA,KAAA,cAAA,EAZA;;AAAA;AAaA,qBAAA,OAAA,GAAA,KAAA;AACA,qBAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA,qBAAA,QAAA,CAAA,OAAA,CAAA,MAAA;AAfA;AAAA;;AAAA;AAAA;AAAA;AAiBA,qBAAA,OAAA,GAAA,KAAA;AACA,gBAAA,OAAA,CAAA,GAAA;;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAqBA,IAAA,cArBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAwBA,IAAA,CAAA,cAAA,EAxBA;;AAAA;AAwBA,gBAAA,IAxBA;AAyBA,qBAAA,eAAA,CAAA,IAAA;AACA,qBAAA,kBAAA,CAAA,IAAA,CAAA,WAAA;AA1BA;AAAA;;AAAA;AAAA;AAAA;AA4BA,gBAAA,OAAA,CAAA,GAAA;;AA5BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,KA+BA,UAAA,CAAA,CAAA,iBAAA,CAAA,CA/BA,MAgCA,YAAA,CAAA;AACA,IAAA,kBAAA,EAAA;AADA,GAAA,CAhCA,CAvBA;AA2DA,EAAA,OA3DA,qBA2DA;AACA;AACA,SAAA,aAAA,GAAA,KAAA,CAAA,QAAA,CAAA,KAAA,KAAA,EAAA,KAAA,IAAA,CAAA;AACA;AA9DA,CAAA","sourcesContent":["<template>\r\n    <div class=\"container\">\r\n        <p class=\"title\">AchieveIt 软件项目管理平台</p>\r\n        <el-card class=\"login-box bg-translucence\" shadow=\"hover\">\r\n            <el-form ref=\"form\" label-position='left' :model=\"form\" :rules=\"rules\" label-width='60'>\r\n                <el-form-item label=\"账号:\" prop=\"account\">\r\n                    <el-input v-model=\"form.username\"/>\r\n                </el-form-item>\r\n                <el-form-item label=\"密码:\" prop=\"password\">\r\n                    <el-input v-model=\"form.password\" type=\"password\"/>\r\n                </el-form-item>\r\n            </el-form>\r\n            <el-button type=\"primary\" class=\"login-btn btn\" @click=\"userLogin\"\r\n                       :loading=\"loading\" :disabled=\"loading\"\r\n            >\r\n                登录\r\n            </el-button>\r\n            <!--            <el-button class=\"tourist-btn btn\" @click=\"login\">游客登录</el-button>-->\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  import {mapActions, mapMutations} from 'vuex';\r\n  import User from '@/sys/models/user';\r\n  import Utils from '@/sys/utils/util';\r\n  export default {\r\n    data() {\r\n      return {\r\n        loading: false, // 加载动画\r\n        wait: 2000, // 2000ms之内不能重复发起请求\r\n        throttleLogin: null, // 节流登录\r\n        form: {\r\n          username: 'root',\r\n          password: '123456',\r\n        },\r\n        rules: {\r\n          account: [{\r\n            required: true,\r\n            message: \"请输入账号\"\r\n          }],\r\n          password: [{\r\n            required: true, message: \"请输入密码\"\r\n          }, {\r\n            min: 6, message: \"长度至少为6位\"\r\n          }]\r\n        }\r\n      };\r\n    },\r\n    methods: {\r\n      async userLogin() {\r\n        const {username, password} = this.form;\r\n        await this.login(username, password);\r\n      },\r\n      async touristLogin() {\r\n        await this.login();\r\n      },\r\n      async login(username, password) {\r\n        try {\r\n          this.loading = true;\r\n          await User.getToken(username, password);\r\n          await this.getInformation();\r\n          this.loading = false;\r\n          this.$router.push('/about');\r\n          this.$message.success('登录成功');\r\n        } catch (e) {\r\n          this.loading = false;\r\n          console.log(e);\r\n        }\r\n      },\r\n      async getInformation() {\r\n        try {\r\n          // 尝试获取当前用户信息\r\n          const user = await User.getPermissions();\r\n          this.setUserAndState(user);\r\n          this.setUserPermissions(user.permissions);\r\n        } catch (e) {\r\n          console.log(e);\r\n        }\r\n      },\r\n      ...mapActions(['setUserAndState']),\r\n      ...mapMutations({\r\n        setUserPermissions: 'SET_USER_PERMISSIONS',\r\n      }),\r\n    },\r\n    created() {\r\n      // 节流登录\r\n      this.throttleLogin = Utils.throttle(this.login, this.wait);\r\n    },\r\n  };\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .container {\r\n        width: 100%;\r\n        height: 100%;\r\n        background-image: url(\"../../assets/img/login-bg.jpg\");\r\n        background-size: cover;\r\n        position: fixed;\r\n    }\r\n\r\n    .title {\r\n        font-size: 48px;\r\n        margin-top: 160px;\r\n    }\r\n\r\n    .login-box {\r\n        width: 480px;\r\n        height: 320px;\r\n        margin: 80px auto;\r\n        text-align: center;\r\n    }\r\n\r\n    .bg-translucence {\r\n        background-color: rgba(255, 255, 255, .4);\r\n    }\r\n\r\n    .btn {\r\n        width: 440px;\r\n        height: 40px;\r\n    }\r\n\r\n    .login-btn {\r\n        margin-bottom: 16px;\r\n    }\r\n\r\n    .tourist-btn {\r\n        margin-left: -2px;\r\n    }\r\n</style>\r\n"],"sourceRoot":"src/views/login"}]}